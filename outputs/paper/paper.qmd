---
title: "Toronto's continuously growth reported crime cases in past years."
subtitle: "An Analysis of Toronto's reported crime from 2014 to 2022"
author: 
  - Ziheng Zhong
thanks: "Code and data are available at: https://github.com/iJustinn/Totonto_Reported_Crimes.git"
date: today
date-format: long
abstract: "This study presents a comprehensive analysis of reported crime data in Toronto, as sourced from Open Data Toronto, to explore the trend of urban criminal patterns in Toronto over the past years. By examining reported incidents from 2014 to 2022, this paper identifies key trends in crime cases across different years and police divisions, highlighting possible key factors that may caused such results. In a word, the paper seeks to provide actionable insights for city planners, law enforcement, and community advocates, aiming to build a safer, more enjoyable urban living environment."
format: pdf
number-sections: true
bibliography: references.bib
---

```{r}
#| include: false
#| warning: false
#| message: false

library(opendatatoronto)
library(tidyverse)
library(ggplot2)
library(janitor)
library(dplyr)
library(readr)
library(knitr)

# read the cleaned_data
raw_data <- read_csv(here::here("inputs/data/raw_data.csv"))

# read the cleaned_data
cleaned_data <- read_csv(here::here("outputs/data/cleaned_data.csv"))

# read the sum_by_year_data
sum_by_year_data <- read_csv(here::here("outputs/data/sum_by_year_data.csv"))

# read the sum_by_division_data
sum_by_division_data <- read_csv(here::here("outputs/data/sum_by_division_data.csv"))
```



# Introduction

Public safety, as one of the most important factors to ensure a high quality life for people, is an important aspect that requires continuous evaluation and enforcement. The city of Toronto, as one of the place with most population in Canada, is not an exception to the challenges posed by crimes. This paper takes a deep dive into the extensive reported crime data provided by Open Data Toronto[@citeODT], covering the period from 2014 to 2022. The analysis is grounded in a methodical approach to identify and interpret crime trends across the past years, also within the city's diverse police divisions, offering a detailed chronicle of criminal activity over selected time span. To be more specific, this research analyzed and visualized how crime spreads out across different divisions and how it changes over the years. By dissecting the data year by year, division by division, this study uncovers patterns that could inform future urban planning and law enforcement strategies. The role of population growth, natural diseases and urban development, are considered as potential catalysts influencing these patterns.

Moreover, the paper aims to a little beyond simply displaying statistics. It endeavors to contextualize the numerical findings within the broader spectrum of Toronto's urban structure. The motivation for this discussion is that changes in crime rates are often associated with changes in other indicators of the city, such as education level[@citeEdu], unemployment rate[@citeUnemp], economic level[@citeEcon], and so on. By doing this, the study aims to offer useful advice that can help city officials and the police create plans to make the city safer and better for all residents. Through these ways, the paper is not just an exposition of data, but a roadmap towards a better living environment.

The subsequent sections of this paper are organized to facilitate a comprehensive understanding of the study and its implications. Following this introduction, @sec-2 outlines the methodology employed in the analysis, ensuring transparency and replicability. @sec-3 presents the findings in detail, charting the trends in reported crimes over time and across Toronto's police divisions. also discusses these findings in other aspects such as: infrastructure construction, structure of the city, etc. Finally, @sec-4 concludes the paper, summarizing the key insights and finding in this research.



# Data {#sec-2}

## Data Source

The data used in this paper was collected by the OpenDataToronto Library [@citeODT]. The specific data set used in this research is the 'police-annual-statistical-report-reported-crimes' [@citeDataset].

Data used in this paper was downloaded, cleaned and analyzed with the programming language R [@citeR]. Also with support of additional packages in R: `tidyverse` [@citeTidyverse], `ggplot2` [@citeGgplot], `janitor` [@citeJanitor], `dplyr` [@citeDplyr], `readr` [@citeReadr], `knitr` [@citeknitr].

## Data Processing

### Raw and Cleaned Data

```{r}
#| message: false
#| echo: false
#| label: tbl-raw_data
#| tbl-cap: Head of Raw Toronto Reported Crimes Data

head (raw_data, 6) |>
  kable(
    col.names = c("ID", "Reported Year", "Division", "Category", "Sub Type", "Total Case", "Cleared Case"),
  booktabs = TRUE
  )
```

```{r}
#| message: false
#| echo: false
#| label: tbl-cleaned_data
#| tbl-cap: Head of Cleaned Toronto Reported Crimes Data

head (cleaned_data, 6) |>
  kable(
    col.names = c("Reported Year", "Division", "Total Case"),
  booktabs = TRUE
  )
```

The raw data set, first few lines shown in @tbl-raw_data, contains more than 30000 reported crime cases of Toronto from 2014 to 2022 in all police divisions, including reported crime types, case status, case id, etc. Since this research does not need that much information, thus the data was cleaned as needed. Now the cleaned data only shows the number of reported crimes cases in corresponding years and the police division each case reported to. The first few lines of the cleaned data was shown in the @tbl-cleaned_data.

### Further Data Processing

In order to make it easier to draw the data in the future, the cleaned data has been further processed into data with only two variables, which are used to correspond to the x-axis and y-axis when drawing.

```{r}
#| message: false
#| echo: false
#| label: tbl-by_year_data
#| tbl-cap: Head of Toronto Reported Crimes Data by year

head (sum_by_year_data, 6) |>
  kable(
    col.names = c("Reported Year","Total Cases"),
  booktabs = TRUE
  )
```

As mentioned earlier, this paper will first analyze the trends of reported crimes in different years. Therefore, the first further processed data will add up all data from different policy divisions in each year to form a total number of reported crimes for specific year. The head of these data was shown in @tbl-by_year_data.

```{r}
#| message: false
#| echo: false
#| label: tbl-by_division_data
#| tbl-cap: Head of Toronto Reported Crimes Data by police division

head (sum_by_division_data, 6) |>
  kable(
    col.names = c("Division","Total Cases"),
  booktabs = TRUE
  )
```

Then, this paper will analyze the total number of reported crimes received for different policy divisions disregard of the year. Therefore, the process of this data ignore the year and add up all the data received by each policy division in the cleaned data set to form the data set shown in @tbl-by_division_data.



# Discussion {#sec-3}

## Across years
```{r}
#| label: by_year_chart
#| fig-cap: 2014 to 2022 Toronto Total Reported Crime Cases by Year
#| echo: false

# create the bar chart with y-axis showing total cases in the year and x-axis showing the year number
ggplot(sum_by_year_data, aes(x = report_year, y = total_cases)) +
  scale_x_continuous(breaks = sum_by_year_data$report_year) +
  geom_bar(stat = "identity", fill = "darkgrey") +
  theme_minimal() +
  labs(x = "Report Year",
       y = "Total Cases") +
  theme(axis.text.x = element_text(angle = 90, hjust = 1))
```



## Across divisions
```{r}
#| label: by_division_chart
#| fig-cap: 2014 to 2022 Toronto Total Reported Crime Cases by Division
#| echo: false

# create the bar chart with y-axis showing total cases in the division and x-axis showing the division number
ggplot(sum_by_division_data, aes(x = division, y = total_cases, fill = division)) +
  #geom_bar(stat = "identity", position = position_dodge()) +
  geom_bar(stat = "identity", fill = "darkgrey") +
  theme_minimal() +
  labs(x = "Police Division",
       y = "Total Cases") +
  theme(axis.text.x = element_text(angle = 90, hjust = 1))
```


# Conclusion {#sec-4}

## General



## Other aspects




